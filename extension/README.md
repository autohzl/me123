# 标签页选择器 Chrome扩展

这个Chrome扩展帮助您获取已打开的标签页信息，并将它们直接发送到您的个人导航页面，实现一键添加书签功能。

## 主要功能

- ✅ **获取当前浏览器中所有打开的标签页**
- ✅ **自动获取网站图标（favicon）**并将其添加到导航页
- ✅ **一键发送标签页信息**到您的个人导航页面
- ✅ **自动填充**网址、标题和图标到表单中

## 新增功能：增强图标获取

### 特别支持常见国内网站图标获取

本扩展现在特别支持以下网站的图标获取：

- **小红书**（xiaohongshu.com）- 使用优化的图标URL
- **微博**（weibo.com）
- **知乎**（zhihu.com）
- **抖音**（douyin.com）

对于其他网站，扩展会自动尝试多种方法获取最佳图标。

## 重要说明

> **⚠️ 本扩展必须在您的导航页面中使用！**
> 
> 扩展会检测当前活动标签页是否为导航页，如果不是，将无法成功发送数据。

## 安装方法

### 本地开发模式安装

1. 下载本扩展文件并解压到本地文件夹
2. 打开Chrome浏览器，进入扩展管理页面 (`chrome://extensions/`)
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择本扩展所在的文件夹

## 使用方法

1. **先打开您的个人导航页面**（必须包含添加链接功能的页面）
2. 确保导航页是**当前活动的标签页**
3. 点击Chrome工具栏上的扩展图标
4. 在弹出窗口中，从列表中选择您想要添加到导航页的标签
5. 点击"发送"按钮
6. 标签页的URL、标题和图标会自动填充到导航页的添加表单中

## 网站图标（Favicon）获取

本扩展会自动获取标签页的图标URL，并尝试以多种方式将其添加到您的导航页中：

- 针对小红书等常见国内网站使用**专门优化的图标URL**
- 自动填充名为`link-icon`、`icon`或`favicon`的输入字段
- 更新页面上的图标预览元素
- 尝试在图标选择下拉菜单中选择favicon选项
- 如果原始图标无法获取，会使用备用的获取方案
- 采用多层备用机制，确保总能提供有效的图标URL

## 常见问题解答

### "发送失败，请确保导航页已打开"错误解决方案

如果您遇到"发送失败，请确保导航页已打开"的错误，请按照以下步骤排查：

#### 1. 确认导航页已正确打开
- 确保导航页是当前活动的标签页
- 刷新导航页后再尝试，确保页面完全加载
- 检查导航页是否包含添加链接的表单

#### 2. 检查导航页结构
确保您的导航页包含以下元素之一：
- ID为`link-url`和`link-name`的输入框
- name为`url`和`name`的输入框
- type为`url`的输入框和name为`name`的输入框

#### 3. 检查扩展权限
- 在Chrome扩展管理页面，确保本扩展有"读取和更改您访问的网站的所有数据"的权限
- 尝试禁用后重新启用扩展
- 在扩展弹出窗口中点击"检查权限"按钮

#### 4. 浏览器问题
- 清除浏览器缓存和Cookie
- 重启浏览器
- 检查是否有其他扩展干扰

#### 5. 扩展版本
- 确保使用最新版本的扩展
- 尝试重新安装扩展

### "发送失败，无法与页面通信"错误解决方案

此错误通常表示内容脚本未能正确加载或执行，解决方法：

1. **刷新页面**: 在导航页上按F5刷新
2. **重新加载扩展**: 在弹出窗口中点击"重新加载扩展"按钮
3. **检查权限**: 确保扩展有访问页面的权限
4. **检查导航页是否有内容安全策略(CSP)限制**:
   - 某些网站的CSP可能会阻止扩展的内容脚本执行
   - 如果您是导航页的开发者，可以修改CSP以允许扩展执行脚本

### 其他常见问题

**问：为什么无法获取小红书等网站的图标？**
答：我们已经特别优化了对小红书、微博、知乎等网站的图标获取。最新版本支持这些网站的图标自动获取。如果仍有问题，请确认是否使用了最新版本的扩展。

**问：为什么显示"发送失败，请确保导航页已打开"？**
答：您必须在当前活动的标签页中打开您的导航页面。如果您的导航页已打开但仍显示此错误，可能是因为扩展无法识别您的导航页面结构。请确保您的导航页面包含特定的HTML元素（如ID为`link-url`和`link-name`的输入框）。

**问：扩展支持哪些类型的导航页？**
答：本扩展设计为与多种导航页面结构兼容，它会查找常见的输入框ID和名称，如`link-url`、`link-name`，或者表单中的`url`和`name`字段。如果您的导航页有特殊结构，可能需要修改扩展的内容脚本。

## 隐私说明

本扩展只会获取标签页的URL、标题和图标，不会收集或传输您的个人数据。所有数据仅在您的本地浏览器中处理，不会发送到任何外部服务器。 